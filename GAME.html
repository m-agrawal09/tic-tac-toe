<html>
<head>
   
    <title>Tic Tac Toe | MITS GWALIOR</title>
    <link rel="stylesheet" href="game.css">
</head>
<body>
    <header>
        <div class="institute-info">
			<a href="https://web.mitsgwalior.in/">
			<img src="F:\PPT Files\Imp Media\mits-logo.png" width="130" alt="Logo1" style="position: absolute; top: 15px; left: 70px;"><br>
			</a>
			
            <h1>MADHAV INSTITUTE OF TECHNOLOGY & SCIENCE, GWALIOR</h1>
            <p>Deemed University</p>
            <p>Declared under Distinct Category by Ministry of Education, Government of India</p>
            <p>NAAC ACCREDITED WITH A++ GRADE</p>
			<a href="https://web.mitsgwalior.in/">
			<img src="F:\PPT Files\Imp Media\flag_logo2.png" width="130" alt="Logo2" style="position: absolute; top: 15px; left: 1320px;"><br>
			</a>
        </div>
    </header>
	
    <main>
        <h1><center>TIC TAC TOE</center></h1>
        <div>
            <div class="status"><center>Player X's turn</center></div>
            <div class="board">
                <div class="cell" data-index="0"></div>
                <div class="cell" data-index="1"></div>
                <div class="cell" data-index="2"></div>
                <div class="cell" data-index="3"></div>
                <div class="cell" data-index="4"></div>
                <div class="cell" data-index="5"></div>
                <div class="cell" data-index="6"></div>
                <div class="cell" data-index="7"></div>
                <div class="cell" data-index="8"></div>
                <div class="winning-line"></div>
            </div>
            <center><button class="reset-btn">Reset Game</button></center>
        </div>
    </main>

    <section class="developers-section">
        <h2>Developers</h2>
        <div class="developers-container">
            <div class="developer">
                <h3>Medhavi Agarwal</h3>
                <p>Enrollment: BTET24O1075</p>
            </div>
            <div class="developer">
                <h3>Mohd Rehan Qureshi</h3>
                <p>Enrollment: BTET24O1076</p>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cells = document.querySelectorAll('.cell');
            const statusDisplay = document.querySelector('.status');
            const resetButton = document.querySelector('.reset-btn');
            const winningLine = document.querySelector('.winning-line');
            
            let gameActive = true;
            let currentPlayer = "X";
            let gameState = ["", "", "", "", "", "", "", "", ""];
            
            const winningConditions = [
                [0, 1, 2], // top row
                [3, 4, 5], // middle row
                [6, 7, 8], // bottom row
                [0, 3, 6], // left column
                [1, 4, 7], // middle column
                [2, 5, 8], // right column
                [0, 4, 8], // diagonal top-left to bottom-right
                [2, 4, 6]  // diagonal top-right to bottom-left
            ];
            
            function handleCellClick(clickedCellEvent) {
                const clickedCell = clickedCellEvent.target;
                const clickedCellIndex = parseInt(clickedCell.getAttribute('data-index'));
                
                if(gameState[clickedCellIndex] !== "" || !gameActive) {
                    return;
                }
                
                handleCellPlayed(clickedCell, clickedCellIndex);
                handleResultValidation();
            }
            
            function handleCellPlayed(clickedCell, clickedCellIndex) {
                gameState[clickedCellIndex] = currentPlayer;
                clickedCell.textContent = currentPlayer;
                clickedCell.classList.add(`player${currentPlayer}`);
            }
            
            function handleResultValidation() {
                let roundWon = false;
                let winningCombo = [];
                
                for(let i = 0; i < winningConditions.length; i++) {
                    const winCondition = winningConditions[i];
                    let a = gameState[winCondition[0]];
                    let b = gameState[winCondition[1]];
                    let c = gameState[winCondition[2]];
                    
                    if(a === '' || b === '' || c === '') {
                        continue;
                    }
                    
                    if(a === b && b === c) {
                        roundWon = true;
                        winningCombo = winCondition;
                        break;
                    }
                }
                
                if(roundWon) {
                    statusDisplay.textContent = `Player ${currentPlayer} wins!`;
                    gameActive = false;
                    drawWinningLine(winningCombo);
                    return;
                }
                
                let roundDraw = !gameState.includes("");
                if(roundDraw) {
                    statusDisplay.textContent = "Game ended in a draw!";
                    gameActive = false;
                    return;
                }
                
                currentPlayer = currentPlayer === "X" ? "O" : "X";
                statusDisplay.textContent = `Player ${currentPlayer}'s turn`;
            }
            
            function drawWinningLine(winningCombo) {
                const firstCell = document.querySelector(`.cell[data-index="${winningCombo[0]}"]`);
                const lastCell = document.querySelector(`.cell[data-index="${winningCombo[2]}"]`);
                
                const boardRect = document.querySelector('.board').getBoundingClientRect();
                const firstRect = firstCell.getBoundingClientRect();
                const lastRect = lastCell.getBoundingClientRect();
                
                // Calculate positions relative to the board
                const startX = firstRect.left + firstRect.width / 2 - boardRect.left;
                const startY = firstRect.top + firstRect.height / 2 - boardRect.top;
                const endX = lastRect.left + lastRect.width / 2 - boardRect.left;
                const endY = lastRect.top + lastRect.height / 2 - boardRect.top;
                
                // Calculate line length and angle
                const length = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));
                const angle = Math.atan2(endY - startY, endX - startX) * 180 / Math.PI;
                
                // Set line properties
                winningLine.style.width = `${length}px`;
                winningLine.style.left = `${startX}px`;
                winningLine.style.top = `${startY}px`;
                winningLine.style.transform = `rotate(${angle}deg)`;
                winningLine.style.backgroundColor = currentPlayer === "X" ? "#f0f" : "#0f0";
                winningLine.style.boxShadow = `0 0 10px ${currentPlayer === "X" ? "#f0f" : "#0f0"}`;
                winningLine.style.opacity = "1";
                
                // Highlight winning cells
                winningCombo.forEach(index => {
                    const cell = document.querySelector(`.cell[data-index="${index}"]`);
                    cell.style.boxShadow = `0 0 20px ${currentPlayer === "X" ? "#f0f" : "#0f0"}`;
                    cell.style.transform = "scale(1.1)";
                });
            }
            
            function handleResetGame() {
                gameActive = true;
                currentPlayer = "X";
                gameState = ["", "", "", "", "", "", "", "", ""];
                statusDisplay.textContent = `Player ${currentPlayer}'s turn`;
				statusDisplay.classList.remove("win");

                
                cells.forEach(cell => {
                    cell.textContent = "";
                    cell.classList.remove("playerX", "playerO");
                    cell.style.boxShadow = "0 0 10px rgba(0, 255, 255, 0.3)";
                    cell.style.transform = "scale(1)";
                });
                
                winningLine.style.opacity = "0";
            }
            
            cells.forEach(cell => cell.addEventListener('click', handleCellClick));
            resetButton.addEventListener('click', handleResetGame);
        });
    </script>
</body>
</html>

